{% extends scShortPath(layout ?? 'layout_admin.twig') %}
{% import scShortPath('macros/crud.twig') as crud %}

{% block content_title %}{% if cronScheduler.id %}Редактировать{% else %}Создать{% endif %}{% endblock %}
{% block content %}
    {{ 
        crud.editview({
            action: scLink(cronScheduler.id ? 'AdminCronSchedulerUpdate' : 'AdminCronSchedulerCreate', {id: (cronScheduler ? cronScheduler.id : scUUID()) }),
            redirect: scLink('AdminCronSchedulerRead', {id: '${cronScheduler.id.uuid}'}),
            actions: {
                fields: [
                    {
                        type: 'submit',
                        label: 'Сохранить',
                    },
                ],
            },
            panels: [
                {
                    name: 'default',
                    label: 'Основные данные',
                    active: true,
                    fields: [
                        {
                            type: 'hidden',
                            name: 'cronScheduler.id',
                            value: cronScheduler.id|default(scUUID())
                        },
                        {name: 'cronScheduler.job', value: cronScheduler.job, type: 'input', label: 'job'},
                        {name: 'cronScheduler.cronExpression', value: cronScheduler.cronExpression, type: 'input', label: 'Правило запуска'},
                        {name: 'cronScheduler.isActive', value: cronScheduler.isActive, type: 'boolean', label: 'Активная работа'},
                        {name: 'cronScheduler.isSafeRun', value: cronScheduler.isSafeRun, type: 'boolean', label: 'Безопасный запуск'},
                        {name: 'cronScheduler.dateStart', value: cronScheduler.dateStart.format('Y-m-d'), type: 'date', label: 'Дата начала выполнения'},
                        {name: 'cronScheduler.dateEnd', value: cronScheduler.dateEnd.format('Y-m-d'), type: 'date', label: 'Дата окончания выполнения'},
                    ]
                }, 
                {
                    name: 'services',
                    label: 'Служебные данные',
                    fields: [
                        {
                            name: 'cronScheduler.dateCreated',
                            value: cronScheduler.dateCreated.format('Y-m-d H:i:s'),
                            type: 'input',
                            label: 'Дата создания',
                            disabled: true
                        },
                        {
                            name: 'cronScheduler.dateModified',
                            value: cronScheduler.dateCreated.format('Y-m-d H:i:s'),
                            type: 'input',
                            label: 'Дата изменения',
                            disabled: true
                        },
                    ]
                }
            ]
        }) 
    }}
{% endblock %}